<h1>Search Traders</h1>

<%= form_with model: @trader, url: { action: "find" }, method: 'get', local: true do |f| %>
<div>
    <p>Find a Trader by their Username or Email<% f.label :login %><br />
    <%= f.text_field :login, placeholder: "..."%></p>
</div>
<div>
    <%= f.submit "Search" %>
</div>
<% end %>
<br>
<% if @searched_traders %>
    <% @searched_traders.each do |trader| %>
        <% if trader.avatar.attached? %>
        <%= cl_image_tag(trader.avatar.key, crop: :scale, width: 100, cloud_name: ENV["CLOUDINARY_CLOUDNAME"]) %>
        <% end %>
        <h3><%= trader.username.titleize %></h3>
        <h3><%= trader.email.titleize %></h3>
        <p>Lorem Ipsum Description</p>
        <h4>Credits: <%= trader.credits %></h4>

        <h4>Strongest Rift Closed: <%= trader.highest_rift_level %></h4>
        <h4>No. of Rifts Closed: <%= trader.rifts_closed %></h4>
        <h4>No. of Items Traded: <%= trader.items_traded %></h4>
        <%= link_to "Show Profile", trader_path(trader), method: :get %> </p>
    <% end %> 
<% end %>
